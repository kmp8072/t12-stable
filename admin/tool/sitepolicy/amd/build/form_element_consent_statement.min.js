define(["jquery","totara_form/form","core/templates"],function(a,b){function c(a,d,e,f){return this instanceof c?(b.Element.apply(this,arguments),void(this.input=null)):new c(a,d,e,f)}return c.prototype=Object.create(b.Element.prototype),c.constructor=c,c.prototype.toString=function(){return"[object ConsentStatement]"},c.prototype.init=function(b){var c=this.getForm(),d=a(this.getNode()),e=d.find('input[data-rel="addstatement"]'),f=d.find('input[data-rel="removestatement"]'),g=a("#"+this.id).attr("data-element-name"),h=a(d.find('input[name="'+g+'__addstatement"]')),i=this;e.on("click",function(){h.val(1),c.reload()}),f.on("click",function(b){b.preventDefault();var c=a(this),d=a(c.closest('div[data-rel="statement-block"]')),e=a(d.find('input[name="'+g+"__removedstatement["+c.data("index")+']"]'));i.delete_confirm(b,function(){e.val(1),d.addClass("hidden"),d.find("input[required]").removeAttr("required")})}),b()},c.prototype.delete_confirm=function(b,c){require(["core/modal_factory","core/modal_events","core/str"],function(d,e,f){var g=[{key:"deleteconsentconfirmtitle",component:"tool_sitepolicy"},{key:"deleteconsentconfirmbody",component:"tool_sitepolicy"}],h=f.get_strings(g);h.done(function(f){var g={type:d.types.CONFIRM,title:f[0],body:f[1]},h=d.create(g,a(b));h.done(function(a){var b=a.getRoot();b.on(e.yes,c),a.show()})})})},c});